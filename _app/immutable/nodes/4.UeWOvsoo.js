import"../chunks/disclose-version.Bg9kRutz.js";import{p as J,b as K,a as X,s as Y,t as S,g as b,n as f,k as E}from"../chunks/runtime.DTLJS4Cp.js";import{s as Q}from"../chunks/render.CJy_g0Wp.js";import{p as B}from"../chunks/proxy.CKJoFeXp.js";import{a as V,L as Z}from"../chunks/LoadingSpinner.CxygTBZJ.js";import{i as q}from"../chunks/if.BBPrruah.js";import{e as ee,i as se}from"../chunks/each.DHoT2t3W.js";import{a as _,t as P,b as G,c as y,f as M,s as x}from"../chunks/template.B2J4WHVd.js";import{s as te}from"../chunks/app.Cgui-v1U.js";import{h as ae}from"../chunks/svelte-head.CUqH2DhT.js";import{s as k,h as oe}from"../chunks/attributes.ClFAMcYJ.js";import{s as re}from"../chunks/class.CT2fZM7p.js";import{u as ie,s as ne,p as le}from"../chunks/stores.CB5tRbkQ.js";import{b as h}from"../chunks/paths.DkHewEpu.js";import{o as ce}from"../chunks/entry.B32MCN3i.js";const C="AIzaSyBGF2E59arX14AeWisWBTnPFskXKWS-TcI",L="1wjEllGmrOEUbwKLXkURFQSZVZyfw-J2-T_lOX2FAJiw";function pe(o){return o.filter(s=>s!=="")}function N(o,s){const n=["Entry Tag","Entry Date","Username","Score","Portray","Resonance","Amplification","Name"],c=n.slice(0,4);return o==null?void 0:o.reduce((l,r,a)=>{var u;if(s!=null&&s[a]){const v=((u=s[a].values)==null?void 0:u.reduce((p,t,F)=>{let w={};const d=[t.slice(4,8),t.slice(8,12),t.slice(12,16),t.slice(16,20)].map((e,i)=>{let m={};if(e[0]||e[1]||e[2]||e[3])return m[n[4]]=e[0],m[n[5]]=e[1],m[n[6]]=e[2],m[n[7]]=e[3],m}).filter(e=>e!==void 0);return c.forEach((e,i)=>{e==="Score"&&(t[i]=Number(t[i].replace(/,/g,""))),e==="Entry Date"&&(t[i]=new Date(t[i])),w[e]=t[i]}),w.characters=d,p.push(w),p},[]))??[];s[a].values=v,l[r]=s[a]}return l},{})}const de=async({fetch:o})=>({sheet:new Promise(async(n,c)=>{var l;try{const r=await o(`https://sheets.googleapis.com/v4/spreadsheets/${L}/values/F2P!B8:8?majorDimension=ROWS&key=${C}`),a=r.status===200?pe(((l=await r.json())==null?void 0:l.values[0])??[]):[];if(a.length>0){const u=await o(`https://sheets.googleapis.com/v4/spreadsheets/${L}/values:batchGet?ranges=F2P!C10:V&ranges=F2P!Y10:AR&ranges=F2P!AU10:BN&ranges=F2P!BQ10:CJ&ranges=F2P!CM10:DF&majorDimension=ROWS&key=${C}`),v=N(a,(await u.json()).valueRanges),p=await o(`https://sheets.googleapis.com/v4/spreadsheets/${L}/values:batchGet?ranges=FFA!C10:V&ranges=FFA!Y10:AR&ranges=FFA!AU10:BN&ranges=FFA!BQ10:CJ&ranges=FFA!CM10:DF&majorDimension=ROWS&key=${C}`),t=N(a,(await p.json()).valueRanges),F=Object.keys(v);n({headers:a,f2p:v,ffa:t,raidGroup:F})}}catch(r){r instanceof Error?c(r.message):c(String(r))}})}),Ce=Object.freeze(Object.defineProperty({__proto__:null,load:de},Symbol.toStringTag,{value:"Module"}));var me=P('<link rel="stylesheet" class="svelte-1e2d5jo">'),fe=P('<img loading="lazy" class="w-10 h-10 aspect-square md:hidden svelte-1e2d5jo">'),he=P('<a data-sveltekit-noscroll=""><!> <div class="sr-only md:not-sr-only svelte-1e2d5jo"> </div></a>'),ue=P(`<div class="flex-grow md:px-20 py-6 pt-20 md:pt-6 space-y-6 svelte-1e2d5jo"><h2 class="crimson-text-bold text-tuscany-600 dark:text-white text-3xl px-10 md:px-0 svelte-1e2d5jo">Mane's Bulletin Leaderboard</h2> <div class="flex flex-col md:flex-row gap-4 svelte-1e2d5jo"><aside class="flex-shrink-0 sticky top-6 z-10 md:z-[9] backdrop-blur-sm md:backdrop-blur-none px-10 md:px-0 svelte-1e2d5jo"><div class="raid-nav sticky min-w-[180px] top-[9rem] flex md:flex-col gap-2 md:top-20 svelte-1e2d5jo"><!></div></aside> <!></div></div>`);function Le(o,s){J(s,!0);const n={};ie(n);const c=()=>ne(le,"$page",n);let l=K(B(window.location.search));const r={"Darkness of the Abyss":{thumbnail:`${h}/img/ui/darkness-of-the-abyss.webp`},"Marsh Creation":{thumbnail:`${h}/img/ui/marsh-creation.webp`},"Gold in the Cave":{thumbnail:`${h}/img/ui/gold-in-the-cave.webp`},"Hypothesis of Exhibition":{thumbnail:`${h}/img/ui/hypothesis-of-exhibition.webp`},"Projection of Nightmare":{thumbnail:`${h}/img/ui/projection-of-nightmare.webp`}};ce(()=>{Y(l,B(window.location.search))});var a=ue();ae(d=>{var e=me();k(e,"href",`${h??""}/css/leaderboard.css`),_(d,e)});var u=y(a),v=x(x(u,!0)),p=y(v),t=y(p),F=y(t);V(F,()=>s.data.sheet,d=>{var e=G(),i=M(e);Z(i,{class:"self-center"}),_(d,e)},(d,e)=>{var i=G(),m=M(i);ee(m,65,()=>b(e).raidGroup,se,(R,g,T)=>{var j=he();const U=E(()=>h),z=E(()=>{var A;return(A=c().route.id)==null?void 0:A.replace("/(main)/leaderboard/","").replace("/[raid=raid]","")}),I=E(()=>f(g).toLowerCase().split(" ").join("-")),W=E(()=>b(l));S(()=>k(j,"href",`${b(U)}/leaderboard/${b(z)}/${b(I)}${b(W)}`)),k(j,"style",`--animation-order: ${f(T)+1};`),S(()=>re(j,`raid-link ${(c().params.raid===f(g).toLowerCase().split(" ").join("-")?"bg-tuscany-600 text-white":"")??""} whitespace-nowrap outline-none hover:text-white focus:text-white hover:bg-tuscany-500 focus:bg-tuscany-500 dark:hover:bg-tuscany-400 dark:focus:bg-tuscany-400 p-0.5 md:px-2 md:py-1 svelte-1e2d5jo`));var O=y(j);q(O,()=>r[f(g)].thumbnail,A=>{var $=fe();S(()=>{k($,"src",r[f(g)].thumbnail),k($,"alt",f(g))}),oe($),_(A,$)});var D=x(x(O,!0)),H=y(D);S(()=>Q(H,f(g))),_(R,j)}),_(d,i)});var w=x(x(p,!0));te(()=>s.children,w),_(o,a),X()}export{Le as component,Ce as universal};
//# sourceMappingURL=4.UeWOvsoo.js.map
