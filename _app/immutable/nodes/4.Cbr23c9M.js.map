{"version":3,"file":"4.Cbr23c9M.js","sources":["../../../../../../src/routes/(main)/leaderboard/+layout.ts","../../../../../../src/routes/(main)/leaderboard/+layout.svelte"],"sourcesContent":["import { PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY, PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID } from \"$env/static/public\"\nimport { parseSheetData, filterHeaders } from \"$lib/google/sheets\"\n\nexport const load = async ({ fetch }) => {\n    const sheet: Promise<{\n        headers: Sheet.RaidTitle[],\n        f2p: Sheet.RaidGroup<Sheet.RaidTitle>,\n        ffa: Sheet.RaidGroup<Sheet.RaidTitle>,\n        raidGroup: Sheet.RaidTitle[]\n    }> = new Promise(async (resolve, reject) => {\n        const sheetResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values/F2P!B8:8?majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n        const headers = filterHeaders((await sheetResponse.json())?.values[0] ?? [])\n\n        const f2pResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=F2P!C10:V&ranges=F2P!Y10:AR&ranges=F2P!AU10:BN&ranges=F2P!BQ10:CJ&ranges=F2P!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n        const f2p = parseSheetData(headers, (await f2pResponse.json()).valueRanges)\n\n        const ffaResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=FFA!C10:V&ranges=FFA!Y10:AR&ranges=FFA!AU10:BN&ranges=FFA!BQ10:CJ&ranges=FFA!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n        const ffa = parseSheetData(headers, (await ffaResponse.json()).valueRanges)\n\n        const raidGroup = Object.keys(f2p) as Sheet.RaidTitle[]\n        resolve({ headers, f2p, ffa, raidGroup })\n    })\n\n    return {\n        sheet\n    }\n}\n","<script lang=\"ts\">\n    import { page } from '$app/stores'\n    import { base } from '$app/paths'\n    import { onNavigate } from '$app/navigation'\n\n    import LoadingSpinner from '$lib/components/LoadingSpinner.svelte'\n    \n    let { data, children } = $props()\n    let search = $state(window.location.search)\n\n    const raidMap: Record<Sheet.RaidTitle, { thumbnail: string }> = {\n        \"Darkness of the Abyss\": {\n            thumbnail: `${base}/img/ui/darkness-of-the-abyss.webp`\n        },\n        \"Marsh Creation\": {\n            thumbnail: `${base}/img/ui/marsh-creation.webp`\n        },\n        \"Gold in the Cave\": {\n            thumbnail: `${base}/img/ui/gold-in-the-cave.webp`\n        },\n        \"Hypothesis of Exhibition\": {\n            thumbnail: `${base}/img/ui/hypothesis-of-exhibition.webp`\n        },\n        \"Projection of Nightmare\": {\n            thumbnail: `${base}/img/ui/projection-of-nightmare.webp`\n        }\n    }\n    // const raidGroup = Object.keys(data.f2p) as Sheet.RaidTitle[]\n\n    onNavigate(() => {\n        search = window.location.search\n    })\n</script>\n\n<svelte:head>\n    <link rel=\"stylesheet\" href=\"{base}/css/leaderboard.css\">\n</svelte:head>\n\n<div class=\"flex-grow md:px-20 py-6 pt-20 md:pt-6 space-y-6\">\n    <h2 class=\"crimson-text-bold text-tuscany-600 dark:text-white text-3xl px-10 md:px-0\">Mane's Bulletin Leaderboard</h2>\n\n    <div class=\"flex flex-col md:flex-row gap-4\">\n        <aside class=\"flex-shrink-0 sticky top-6 backdrop-blur-sm md:backdrop-blur-none px-10 md:px-0\">\n            <!-- [&:has(.spinner)]:h-full [&:has(.spinner)]:justify-center -->\n            <div class=\"raid-nav sticky min-w-[180px] top-[9rem] flex md:flex-col gap-2 md:top-20\">\n                <!-- https://10015.io/tools/css-loader-generator -->\n                {#await data.sheet}\n                    <LoadingSpinner class=\"self-center\" />\n                {:then sheet}\n                    {#each sheet.raidGroup as raid, index}\n                        <a href=\"{base}/leaderboard/{raid.toLowerCase().split(\" \").join(\"-\")}{search}\" style=\"--animation-order: {index + 1};\" class=\"raid-link {$page.params.raid === raid.toLowerCase().split(\" \").join(\"-\") ? 'bg-tuscany-600 text-white' : ''} whitespace-nowrap outline-none hover:text-white focus:text-white hover:bg-tuscany-600 focus:bg-tuscany-600 p-0.5 md:px-2 md:py-1\">\n                            {#if raidMap[raid].thumbnail}\n                                <img src=\"{raidMap[raid].thumbnail}\" alt=\"{raid}\" loading=\"lazy\" class=\"w-10 h-10 aspect-square md:hidden\">\n                            {/if}\n                            <div class=\"sr-only md:not-sr-only\">\n                                {raid}\n                            </div>\n                        </a>\n                    {/each}\n                {/await}\n            </div>\n        </aside>\n\n        {@render children()}\n    </div>\n</div>\n\n<style>\n    .raid-link {\n        opacity: 0;\n        transform: translateX(-1rem);\n        animation-name: fade-in;\n        animation-duration: 400ms;\n        animation-timing-function: ease-in;\n        animation-delay: calc(200ms * var(--animation-order));\n        animation-fill-mode: forwards;\n    }\n\n    @keyframes fade-in {\n        0% {\n            opacity: 0;\n            transform: translateX(-1rem);\n        }\n        100% {\n            opacity: 1;\n            transform: translateX(0);\n        }\n    }\n</style>\n"],"names":["load","fetch","resolve","reject","sheetResponse","PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID","PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY","headers","filterHeaders","_a","f2pResponse","f2p","parseSheetData","ffaResponse","ffa","raidGroup","search","$.source","$.proxy","raidMap","base","onNavigate","$.set","sheet","$.index","$$anchor","raid","index","$.template_effect","$.set_attribute","a","$.unwrap","$.set_class","$page"],"mappings":"48BAGO,MAAMA,GAAO,MAAO,CAAE,MAAAC,MAoBlB,CACH,MAfC,IAAI,QAAQ,MAAOC,EAASC,IAAW,OACxC,MAAMC,EAAgB,MAAMH,EAAM,iDAAiDI,CAAoC,4CAA4CC,CAAqC,EAAE,EACpMC,EAAUC,IAAeC,EAAA,MAAML,EAAc,SAApB,YAAAK,EAA6B,OAAO,KAAM,CAAA,CAAE,EAErEC,EAAc,MAAMT,EAAM,iDAAiDI,CAAoC,wIAAwIC,CAAqC,EAAE,EAC9RK,EAAMC,EAAeL,GAAU,MAAMG,EAAY,KAAA,GAAQ,WAAW,EAEpEG,EAAc,MAAMZ,EAAM,iDAAiDI,CAAoC,wIAAwIC,CAAqC,EAAE,EAC9RQ,EAAMF,EAAeL,GAAU,MAAMM,EAAY,KAAA,GAAQ,WAAW,EAEpEE,EAAY,OAAO,KAAKJ,CAAG,EACjCT,EAAQ,CAAE,QAAAK,EAAS,IAAAI,EAAK,IAAAG,EAAK,UAAAC,CAAW,CAAA,CAAA,CAC3C,CAGG,+5BChBAC,EAAgBC,EAAAC,EAAA,OAAO,SAAS,MAAM,CAAA,EAEpC,MAAAC,EAAA,CACF,wBAAA,CACI,UAAA,GAAcC,CAAI,sCAEtB,iBAAA,CACI,UAAA,GAAcA,CAAI,+BAEtB,mBAAA,CACI,UAAA,GAAcA,CAAI,iCAEtB,2BAAA,CACI,UAAA,GAAcA,CAAI,yCAEtB,0BAAA,CACI,UAAA,GAAcA,CAAI,yCAK1BC,GAAA,IAAA,CACaC,EAAAN,EAAAE,EAAA,OAAO,SAAS,MAAA,CAAA,8CAKCE,GAAI,EAAA,sBAAA,uEAWT,kEAENG,IAAK,+BACDA,CAAK,EAAC,UAASC,EAAA,CAAAC,EAAIC,EAAIC,IAAA,YAChBC,EAAA,IAAAC,EAAAC,EAAA,OAAA,GAAAV,GAAmB,EAAA,gBAAAW,EAAAL,CAAI,EAAC,YAAW,EAAG,MAAM,GAAG,EAAE,KAAK,GAAG,UAAGV,CAAM,GAAA,EAAA,EAAA,CAAA,EAA8Ba,EAAAC,EAAA,QAAA,sBAAAC,EAAAJ,CAAK,EAAG,CAAC,GAAA,EAAsBC,EAAA,IAAAI,GAAAF,EAAA,cAAAG,EAAK,EAAC,OAAO,OAASF,EAAAL,CAAI,EAAC,YAAW,EAAG,MAAM,GAAG,EAAE,KAAK,GAAG,EAAI,4BAA8B,KAAE,EAAA,kJAAA,CAAA,qBAChOP,EAAOY,EAACL,CAAI,CAAA,EAAE,UAASD,GAAA,6BACbN,EAAOY,EAACL,CAAI,CAAA,EAAE,SAAS,cAASA,CAAI,CAAA,sDAG9CA,CAAI,CAAA,CAAA"}