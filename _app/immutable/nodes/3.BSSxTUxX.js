import"../chunks/disclose-version.Bg9kRutz.js";import{p as U,t as x,a as z,s as u,g as a,e as w,C as X}from"../chunks/runtime.C2Zc6Vci.js";import{d as D,s as G}from"../chunks/render.BSFr2KKI.js";import{p as b}from"../chunks/proxy.BjlMx0ws.js";import{a as M,t as P,c as d,s as e,f as Y}from"../chunks/template.DJK7smhD.js";import{s as tt}from"../chunks/snippet.D3k6wUhg.js";import{s as S,h as et}from"../chunks/attributes.Cv1ilxUd.js";import{s as O,t as $}from"../chunks/class.C6jkPbH_.js";import{u as at,s as ot,p as st}from"../chunks/stores.CfxQWscz.js";/* empty css                    */import{b as i}from"../chunks/paths.Dv8poYqh.js";import{c as rt,o as V}from"../chunks/index-client.CPyGcluf.js";import{h as nt}from"../chunks/svelte-head.D4WIdBQT.js";import{b as lt}from"../chunks/this.BsltOBbE.js";import{S as ct}from"../chunks/Storm.B8f1THlm.js";const it=!1,Rt=Object.freeze(Object.defineProperty({__proto__:null,ssr:it},Symbol.toStringTag,{value:"Module"}));var dt=P('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/theme-toggles@4.10.1/css/classic.min.css">'),ut=P('<button type="button" title="Toggle theme" aria-label="Toggle theme"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="1.5rem" height="1.5rem" fill="currentColor" stroke-linecap="round" class="theme-toggle__classic pointer-events-none group-data-[state=enabled]:text-amber-300" viewBox="0 0 32 32"><clipPath id="theme-toggle__classic__cutout"><path d="M0-5h30a1 1 0 0 0 9 13v24H0Z"></path></clipPath><g clip-path="url(#theme-toggle__classic__cutout)"><circle cx="16" cy="16" r="9.34"></circle><g stroke="currentColor" stroke-width="1.5"><path d="M16 5.5v-4"></path><path d="M16 30.5v-4"></path><path d="M1.5 16h4"></path><path d="M26.5 16h4"></path><path d="m23.4 8.6 2.8-2.8"></path><path d="m5.7 26.3 2.9-2.9"></path><path d="m5.8 5.8 2.8 2.8"></path><path d="m23.4 23.4 2.9 2.9"></path></g></g></svg> <span class="text-slate-800 dark:text-white group-hover:text-tuscany-600 group-focus:text-tuscany-600 md:sr-only"> </span></button>');function pt(s,t){U(t,!0);const p=rt(),n="delay-500";let l=w("dark"),o=w(!1),c;V(()=>{u(o,b(localStorage.getItem("ots:theme")==="dark")),u(l,b(a(o)?"dark":"light")),a(o)?c.dataset.state="enabled":delete c.dataset.state});function g(m){m.stopPropagation(),setTimeout(()=>{u(o,!a(o)),u(l,b(a(o)?"dark":"light")),a(o)?m.currentTarget.dataset.state="enabled":delete m.currentTarget.dataset.state,localStorage.setItem("ots:theme",a(l)),localStorage.getItem("ots:theme")==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},Number(n.replace("delay-",""))),p("toggle",a(l))}var r=ut();nt(m=>{var L=dt();M(m,L)}),lt(r,m=>c=m,()=>c),r.__click=g;var h=d(r),f=e(e(h,!0)),k=d(f);x(()=>{O(r,`theme-toggle group flex items-center gap-2 text-slate-800 transition-colors delay-500 outline-none ${t.class??""}`),$(r,"theme-toggle--toggled",a(o)),G(k,`Switch to ${(a(l)==="dark"?"light":"dark")??""} mode`)}),M(s,r),z()}D(["click"]);async function ht(s,t,p,n,l,o,c){var g,r,h,f;s.stopPropagation(),u(t,!a(t)),!a(p)&&a(t)&&(u(n,"loading"),await l()),a(t)&&a(o)?(u(n,"playing"),a(o).play(),(g=document.querySelector("#waveform path animate"))==null||g.setAttribute("values",a(c)),(r=document.querySelector("#waveform circle"))==null||r.classList.add("hidden")):!a(t)&&a(o)&&(u(n,"paused"),(h=document.querySelector("#waveform path animate"))==null||h.setAttribute("values",""),(f=document.querySelector("#waveform circle"))==null||f.classList.remove("hidden"),a(o).pause())}var mt=P('<button type="button" class="outline-none flex items-center gap-2 md:static hover:text-tuscany-600 focus:text-tuscany-600"><svg class="round w-6 h-6" id="waveform"><defs><radialGradient id="rgrad" cx="50%" cy="50%" r="50%"><stop offset="0%" style="stop-color:rgb(0,255,10);stop-opacity:1.00"></stop><stop offset="25%" style="stop-color:rgb(0,188,212);stop-opacity:0.70"></stop><stop offset="50%" style="stop-color:rgb(238,130,238);stop-opacity:1.00"></stop><stop offset="75%" style="stop-color:rgb(103,58,183);stop-opacity:0.70"></stop><stop offset="100%" style="stop-color:rgb(233,30,99);stop-opacity:1.00"></stop></radialGradient></defs><circle fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" cx="12" cy="12" r="10"></circle><path style="stroke:url(#rgrad); stroke-width: 1px; fill: none;"><animate attributeName="d" dur="2.54s" repeatCount="indefinite" calcMode="linear" values=""></animate></path></svg> <span class="md:sr-only"> </span></button>');function gt(s,t){U(t,!0);const p={idle:"Listen to the melody",loading:"Searching for the source",playing:"Snap back to reality",paused:"Listen again"};let n=w(!1),l=w("idle"),o=w(!1),c=w(void 0),g=w("");async function r(){const y=await(await fetch(`${window.location.origin}${i}/audio/reverse-bgm.mp3`)).arrayBuffer();structuredClone(y);const C=URL.createObjectURL(new Blob([y],{type:"audio/mpeg"})),_=await new AudioContext().decodeAudioData(y);if(u(c,b(new Audio)),u(o,!0),_){a(c).loop=!0,a(c).src=C;const A=await fetch(`${i}/api/waveform-path`);u(g,b((await A.json()).path))}}var h=mt();h.__click=[ht,n,o,l,r,c,g];var f=d(h),k=e(e(f,!0)),m=d(k);x(()=>G(m,p[a(l)])),M(s,h),z()}D(["click"]);function ft(s){var p;s.stopPropagation();const t=(p=s.currentTarget.closest("header"))==null?void 0:p.querySelector("nav");t&&(t.dataset.state=t.dataset.state==="open"?"close":"open")}function T(s){const t=s.currentTarget.closest("nav");t&&(t.dataset.state="close")}function vt(s){s.stopPropagation();const t=s.currentTarget.closest(".dropdown");t&&(t.dataset.state=t.dataset.state==="open"?"close":"open")}function yt(s,t){u(t,b(a(t)==="outside-the-suitcase"?"inside-the-suitcase":"outside-the-suitcase")),localStorage.setItem("ots:shelter-from-the-storm",a(t))}var xt=P('<!> <header><div class="flex items-center justify-between"><a class="group flex items-center md:flex-col md:items-start outline-none gap-2 md:gap-0"><img alt="Ms. International" loading="lazy" class="w-12 h-12 md:hidden"> <h1 class="crimson-text-bold text-3xl tracking-wider md:hidden group-hover:text-tuscany-600 group-focus:text-tuscany-600">OTS</h1> <h1 class="crimson-text-bold text-3xl sr-only md:not-sr-only group-hover:text-tuscany-600 group-focus:text-tuscany-600">Outside the suitcase</h1> <span class="mukta-regular sr-only md:not-sr-only">Reverse 1999 Global Leaderboard</span></a> <button type="button" class="md:hidden text-slate-800 dark:text-white outline-none hover:text-tuscany-600 focus:text-tuscany-600"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu pointer-events-none"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div> <nav data-state="close" class="data-[state=close]:hidden md:data-[state=close]:flex flex flex-col md:flex-row md:items-center gap-4 mukta-regular text-lg tracking-wide"><a class="outline-none hover:text-tuscany-600 focus:text-tuscany-600">Home</a> <div data-state="close" class="dropdown group md:relative"><div class="flex items-center justify-between md:justify-start gap-1"><a class="outline-none hover:text-tuscany-600 focus:text-tuscany-600">Leaderboard</a> <button type="button" class="outline-none hover:text-tuscany-600 focus:text-tuscany-600"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down w-5 h-5 group-data-[state=open]:hidden pointer-events-none"><path d="m7 15 5 5 5-5"></path><path d="m7 9 5-5 5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-down-up w-5 h-5 group-data-[state=close]:hidden pointer-events-none"><path d="m7 20 5-5 5 5"></path><path d="m7 4 5 5 5-5"></path></svg></button></div> <div><a class="border-l-8 border-transparent outline-none hover:text-tuscany-600 focus:text-tuscany-600 px-4">F2P</a> <a class="border-l-8 border-transparent outline-none hover:text-tuscany-600 focus:text-tuscany-600 px-4">FFA</a></div></div> <span class="outline-none line-through blur-[2px] select-none">Stats</span> <button type="button" class="text-left outline-none hover:text-tuscany-600 focus:text-tuscany-600"> </button> <!> <!></nav></header> <!>',1);function It(s,t){U(t,!0);const p={};at(p);const n=()=>ot(st,"$page",p);let l=w(b(localStorage.getItem("ots:shelter-from-the-storm")??"outside-the-suitcase")),o=X(()=>a(l)==="outside-the-suitcase"?"":"hidden");V(()=>{document.documentElement.addEventListener("click",()=>{const v=document.querySelector("nav"),B=document.querySelectorAll(".dropdown");v&&(v.dataset.state="close"),B.forEach(E=>{E.dataset.state="close"})}),document.documentElement.addEventListener("keyup",v=>{if(v.key==="Escape"){const B=document.querySelector("nav"),E=document.querySelectorAll(".dropdown");B&&(B.dataset.state="close"),E.forEach(W=>{W.dataset.state="close"})}})});var c=xt(),g=Y(c);ct(g,{get class(){return a(o)}});var r=e(e(g,!0));x(()=>O(r,`sticky bottom-0 z-10 flex flex-col-reverse md:flex-row gap-6 items-stretch justify-between backdrop-blur-md ${(n().url.pathname.includes(`${i}/leaderboard/`)?"bg-white/70 dark:bg-slate-900/70":"")??""} px-10 md:px-20 py-6`));var h=d(r),f=d(h);S(f,"href",`${i??""}/`);var k=d(f);S(k,"src",`${i??""}/jessica-ms-international.png`);var m=e(e(f,!0));m.__click=[ft];var L=e(e(h,!0)),y=d(L);S(y,"href",`${i??""}/`),y.__click=[T];var C=e(e(y,!0)),q=d(C),_=d(q);S(_,"href",`${i??""}/leaderboard/darkness-of-the-abyss`),_.__click=[T],x(()=>$(_,"text-tuscany-600",n().url.pathname.includes(`${i}/leaderboard`)));var A=e(e(_,!0));A.__click=[vt];var N=e(e(q,!0));x(()=>O(N,`dropdown-content w-full group-data-[state=close]:hidden flex flex-col gap-1 md:absolute bottom-full md:backdrop-blur-md ${(n().url.pathname.includes(`${i}/leaderboard/`)?"md:bg-white/70 md:dark:bg-slate-900/70":"")??""} md:mb-10`));var j=d(N);x(()=>{var v;return S(j,"href",`${i??""}/leaderboard/${((v=n().data.raid)==null?void 0:v.toLowerCase().split(" ").join("-"))??"darkness-of-the-abyss"??""}?category=f2p`)}),j.__click=[T];var R=e(e(j,!0));x(()=>{var v;return S(R,"href",`${i??""}/leaderboard/${((v=n().data.raid)==null?void 0:v.toLowerCase().split(" ").join("-"))??"darkness-of-the-abyss"??""}?category=ffa`)}),R.__click=[T];var F=e(C,!0);F.nodeValue="  ";var Z=e(F),I=e(e(Z,!0));I.__click=[yt,l];var J=d(I),H=e(e(I,!0));pt(H,{});var K=e(e(H,!0));gt(K,{});var Q=e(e(r,!0));tt(()=>t.children,Q),x(()=>{$(y,"text-tuscany-600",n().url.pathname===`${i}/`),$(j,"border-tuscany-600",new URL(window.location.toString()).searchParams.get("category")==="f2p"),$(R,"border-tuscany-600",new URL(window.location.toString()).searchParams.get("category")==="ffa"),G(J,a(l)==="outside-the-suitcase"?"Take shelter from the rain":"Brave the storm")}),et(k),M(s,c),z()}D(["click"]);export{It as component,Rt as universal};
//# sourceMappingURL=3.BSSxTUxX.js.map
