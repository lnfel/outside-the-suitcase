import{r as X}from"../chunks/index.CT8Tde97.js";import"../chunks/disclose-version.Bg9kRutz.js";import{p as R,t as m,a as O,s as f,g as a,b,k as Y}from"../chunks/runtime.DTLJS4Cp.js";import{d as z,s as U}from"../chunks/render.CJy_g0Wp.js";import{p as S}from"../chunks/proxy.CKJoFeXp.js";import{a as P,t as A,c as g,s as e,f as tt}from"../chunks/template.B2J4WHVd.js";import{s as et}from"../chunks/app.Cgui-v1U.js";import{s as _,h as at}from"../chunks/attributes.ClFAMcYJ.js";import{s as k,t as ot}from"../chunks/class.CT2fZM7p.js";import{u as st,s as rt,p as nt}from"../chunks/stores.BA3CZNGU.js";import{b as d}from"../chunks/paths.jIiee-p2.js";import{o as W}from"../chunks/index-client.XNwHMS1C.js";import{h as ct}from"../chunks/svelte-head.CUqH2DhT.js";import{b as dt}from"../chunks/this.CEww6dYY.js";import{p as lt}from"../chunks/props.BXuQdz7u.js";import{S as it}from"../chunks/Storm.DUuxciWO.js";const ut=!1,pt=async({params:s,url:t})=>({raid:X.find(l=>l.toLowerCase().split(" ").join("-")===s.raid),category:t.searchParams.get("category")??"f2p"}),Rt=Object.freeze(Object.defineProperty({__proto__:null,load:pt,ssr:ut},Symbol.toStringTag,{value:"Module"}));var ht=A('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/theme-toggles@4.10.1/css/classic.min.css">'),mt=A('<button type="button" title="Toggle theme" aria-label="Toggle theme"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="1.5rem" height="1.5rem" fill="currentColor" stroke-linecap="round" class="theme-toggle__classic pointer-events-none" viewBox="0 0 32 32"><clipPath id="theme-toggle__classic__cutout"><path d="M0-5h30a1 1 0 0 0 9 13v24H0Z"></path></clipPath><g clip-path="url(#theme-toggle__classic__cutout)"><circle cx="16" cy="16" r="9.34"></circle><g stroke="currentColor" stroke-width="1.5"><path d="M16 5.5v-4"></path><path d="M16 30.5v-4"></path><path d="M1.5 16h4"></path><path d="M26.5 16h4"></path><path d="m23.4 8.6 2.8-2.8"></path><path d="m5.7 26.3 2.9-2.9"></path><path d="m5.8 5.8 2.8 2.8"></path><path d="m23.4 23.4 2.9 2.9"></path></g></g></svg> <span class="text-slate-800 dark:text-white group-hover:text-tuscany-600 group-focus:text-tuscany-600 dark:group-hover:text-tuscany-400 dark:group-focus:text-tuscany-400 md:sr-only"> </span></button>');function gt(s,t){R(t,!0);let l=lt(t,"class",3,"");const n="delay-500";let i=b("dark"),r=b(!1),u;W(()=>{f(r,S(localStorage.getItem("ots:theme")==="dark")),f(i,S(a(r)?"dark":"light")),a(r)?u.dataset.state="enabled":delete u.dataset.state});function y(h){h.stopPropagation(),f(r,!a(r)),setTimeout(()=>{f(i,S(a(r)?"dark":"light")),a(r)?h.currentTarget.dataset.state="enabled":delete h.currentTarget.dataset.state,localStorage.setItem("ots:theme",a(i)),localStorage.getItem("ots:theme")==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},Number(n.replace("delay-","")))}var c=mt();ct(h=>{var C=ht();P(h,C)}),dt(c,h=>u=h,()=>u),c.__click=y;var p=g(c),x=e(e(p,!0)),w=g(x);m(()=>{k(c,`theme-toggle group flex items-center gap-2 text-amber-600 dark:text-amber-300 outline-none ${l()??""}`),ot(c,"theme-toggle--toggled",a(r)),U(w,`Switch to ${(a(i)==="dark"?"light":"dark")??""} mode`)}),P(s,c),O()}z(["click"]);async function ft(s,t,l,n,i,r,u){var y,c,p,x;s.stopPropagation(),f(t,!a(t)),!a(l)&&a(t)&&(f(n,"loading"),await i()),a(t)&&a(r)?(f(n,"playing"),a(r).play(),(y=document.querySelector("#waveform path animate"))==null||y.setAttribute("values",a(u)),(c=document.querySelector("#waveform circle"))==null||c.classList.add("hidden")):!a(t)&&a(r)&&(f(n,"paused"),(p=document.querySelector("#waveform path animate"))==null||p.setAttribute("values",""),(x=document.querySelector("#waveform circle"))==null||x.classList.remove("hidden"),a(r).pause())}var yt=A('<button type="button" class="outline-none flex items-center gap-2 md:static hover:text-tuscany-500 focus:text-tuscany-500 dark:hover:text-tuscany-400 dark:focus:text-tuscany-400"><svg class="round w-6 h-6" id="waveform"><defs><radialGradient id="rgrad" cx="50%" cy="50%" r="50%"><stop offset="0%" style="stop-color:rgb(0,255,10);stop-opacity:1.00"></stop><stop offset="25%" style="stop-color:rgb(0,188,212);stop-opacity:0.70"></stop><stop offset="50%" style="stop-color:rgb(238,130,238);stop-opacity:1.00"></stop><stop offset="75%" style="stop-color:rgb(103,58,183);stop-opacity:0.70"></stop><stop offset="100%" style="stop-color:rgb(233,30,99);stop-opacity:1.00"></stop></radialGradient></defs><circle fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" cx="12" cy="12" r="10"></circle><path style="stroke:url(#rgrad); stroke-width: 1px; fill: none;"><animate attributeName="d" dur="2.54s" repeatCount="indefinite" calcMode="linear" values=""></animate></path></svg> <span class="md:sr-only"> </span></button>');function vt(s,t){R(t,!0);const l={idle:"Listen to the melody",loading:"Searching for the source",playing:"Snap back to reality",paused:"Listen again"};let n=b(!1),i=b("idle"),r=b(!1),u=b(void 0),y=b("");async function c(){const j=await(await fetch(`${window.location.origin}${d}/audio/reverse-bgm.mp3`)).arrayBuffer();structuredClone(j);const L=URL.createObjectURL(new Blob([j],{type:"audio/mpeg"})),T=await new AudioContext().decodeAudioData(j);if(f(u,S(new Audio)),f(r,!0),T){a(u).loop=!0,a(u).src=L;const $=await fetch(`${d}/api/waveform-path`);f(y,S((await $.json()).path))}}var p=yt();p.__click=[ft,n,r,i,c,u,y];var x=g(p),w=e(e(x,!0)),h=g(w);m(()=>U(h,l[a(i)])),P(s,p),O()}z(["click"]);function xt(s){var l;s.stopPropagation();const t=(l=s.currentTarget.closest("header"))==null?void 0:l.querySelector("nav");t&&(t.dataset.state=t.dataset.state==="open"?"close":"open")}function M(s){const t=s.currentTarget.closest("nav");t&&(t.dataset.state="close")}function kt(s){s.stopPropagation();const t=s.currentTarget.closest(".dropdown");t&&(t.dataset.state=t.dataset.state==="open"?"close":"open")}function bt(s,t){f(t,S(a(t)==="outside-the-suitcase"?"inside-the-suitcase":"outside-the-suitcase")),localStorage.setItem("ots:shelter-from-the-storm",a(t))}var wt=A('<!> <header><div class="flex items-center justify-between"><a class="group flex items-center md:flex-col md:items-start outline-none gap-2 md:gap-0"><img alt="Ms. International" loading="lazy" class="w-12 h-12 md:hidden"> <h1 class="crimson-text-bold text-3xl tracking-wider md:hidden group-hover:text-tuscany-600 group-focus:text-tuscany-600">OTS</h1> <h1 class="crimson-text-bold text-3xl sr-only md:not-sr-only group-hover:text-tuscany-600 group-focus:text-tuscany-600">Outside the suitcase</h1> <span class="mukta-regular sr-only md:not-sr-only">Reverse 1999 Global Leaderboard</span></a> <button type="button" class="md:hidden text-slate-800 dark:text-white outline-none hover:text-tuscany-600 focus:text-tuscany-600"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu pointer-events-none"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div> <nav data-state="close" class="data-[state=close]:hidden md:data-[state=close]:flex flex flex-col md:flex-row md:items-center gap-4 mukta-regular text-lg tracking-wide"><a>Home</a> <div data-state="close" class="dropdown group md:relative"><div class="flex items-center justify-between md:justify-start gap-1"><a>Leaderboard</a> <button type="button" class="outline-none hover:text-tuscany-600 focus:text-tuscany-600 dark:hover:text-tuscany-300 dark:focus:text-tuscany-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down w-4 h-4 group-data-[state=open]:hidden pointer-events-none"><path d="m7 15 5 5 5-5"></path><path d="m7 9 5-5 5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-down-up w-4 h-4 group-data-[state=close]:hidden pointer-events-none"><path d="m7 20 5-5 5 5"></path><path d="m7 4 5 5 5-5"></path></svg></button></div> <div><a>F2P</a> <a>FFA</a></div></div> <a>Stats</a> <button type="button" class="text-left outline-none hover:text-tuscany-500 focus:text-tuscany-500 dark:hover:text-tuscany-300 dark:focus:text-tuscany-300"> </button> <!> <!></nav></header> <!>',1);function Ot(s,t){R(t,!0);const l={};st(l);const n=()=>rt(nt,"$page",l);let i=b(S(localStorage.getItem("ots:shelter-from-the-storm")??"outside-the-suitcase")),r=Y(()=>a(i)==="outside-the-suitcase"?"":"hidden");async function u(){const o=await navigator.serviceWorker.ready;o.addEventListener("updatefound",()=>{const v=o.installing;v==null||v.addEventListener("statechange",()=>{v.state==="installed"&&confirm("New update available! Reload the page to use the latest version of the app?")&&v.postMessage({type:"SKIP_WAITING"})})})}W(()=>{u(),document.documentElement.addEventListener("click",()=>{const o=document.querySelector("nav"),v=document.querySelectorAll(".dropdown");o&&(o.dataset.state="close"),v.forEach(G=>{G.dataset.state="close"})}),document.documentElement.addEventListener("keyup",o=>{if(o.key==="Escape"){const v=document.querySelector("nav"),G=document.querySelectorAll(".dropdown");v&&(v.dataset.state="close"),G.forEach(Q=>{Q.dataset.state="close"})}})});var y=wt(),c=tt(y);it(c,{get class(){return a(r)}});var p=e(e(c,!0));m(()=>k(p,`sticky bottom-0 z-10 flex flex-col-reverse md:flex-row gap-6 items-stretch justify-between backdrop-blur-md ${(n().url.pathname.includes(`${d}/leaderboard/`)?"bg-white/70 dark:bg-slate-900/70":"")??""} px-10 md:px-20 py-6`));var x=g(p),w=g(x);_(w,"href",`${d??""}/`);var h=g(w);_(h,"src",`${d??""}/jessica-ms-international.png`);var C=e(e(w,!0));C.__click=[xt];var j=e(e(x,!0)),L=g(j);_(L,"href",`${d??""}/`),L.__click=[M];var q=e(e(L,!0)),T=g(q),$=g(T);m(()=>{var o;return _($,"href",`${d??""}/leaderboard/raid/${((o=t.data.raid)==null?void 0:o.toLowerCase().split(" ").join("-"))??"darkness-of-the-abyss"??""}?category=${t.data.category??""}`)}),$.__click=[M],m(()=>k($,`${(n().url.pathname.includes(`${d}/leaderboard`)?"text-tuscany-600 dark:text-tuscany-300":"")??""} outline-none hover:text-tuscany-500 focus:text-tuscany-500 dark:hover:text-tuscany-400 dark:focus:text-tuscany-400`));var K=e(e($,!0));K.__click=[kt];var D=e(e(T,!0));m(()=>k(D,`dropdown-content w-full group-data-[state=close]:hidden flex flex-col gap-1 md:absolute bottom-full md:backdrop-blur-md ${(n().url.pathname.includes(`${d}/leaderboard/`)?"md:bg-white/70 md:dark:bg-slate-900/70":"")??""} md:mb-10`));var B=g(D);m(()=>{var o;return _(B,"href",`${d??""}/leaderboard/raid/${((o=t.data.raid)==null?void 0:o.toLowerCase().split(" ").join("-"))??"darkness-of-the-abyss"??""}?category=f2p`)}),B.__click=[M],m(()=>k(B,`border-l-8 border-transparent outline-none hover:text-tuscany-500 focus:text-tuscany-500 dark:hover:text-tuscany-400 dark:focus:text-tuscany-400 ${(n().url.searchParams.get("category")==="f2p"?"border-tuscany-600 dark:border-tuscany-300":"")??""} px-4`));var I=e(e(B,!0));m(()=>{var o;return _(I,"href",`${d??""}/leaderboard/raid/${((o=t.data.raid)==null?void 0:o.toLowerCase().split(" ").join("-"))??"darkness-of-the-abyss"??""}?category=ffa`)}),I.__click=[M],m(()=>k(I,`border-l-8 border-transparent outline-none hover:text-tuscany-500 focus:text-tuscany-500 dark:hover:text-tuscany-400 dark:focus:text-tuscany-400 ${(n().url.searchParams.get("category")==="ffa"?"border-tuscany-600 dark:border-tuscany-300":"")??""} px-4`));var F=e(q,!0);F.nodeValue="   ";var N=e(F);m(()=>{var o;return _(N,"href",`${d??""}/leaderboard/stats/${((o=t.data.raid)==null?void 0:o.toLowerCase().split(" ").join("-"))??"darkness-of-the-abyss"??""}?category=${t.data.category??""}`)});var E=e(e(N,!0));E.__click=[bt,i];var V=g(E),H=e(e(E,!0));gt(H,{});var Z=e(e(H,!0));vt(Z,{});var J=e(e(p,!0));et(()=>t.children,J),m(()=>{k(L,`${(n().url.pathname===`${d}/`?"text-tuscany-600 dark:text-tuscany-300":"")??""} outline-none hover:text-tuscany-500 focus:text-tuscany-500 dark:hover:text-tuscany-400 dark:focus:text-tuscany-400`),k(N,`${(n().url.pathname===`${d}/leaderboard/stats`?"text-tuscany-600 dark:text-tuscany-300":"")??""} outline-none hover:text-tuscany-500 focus:text-tuscany-500 dark:hover:text-tuscany-400 dark:focus:text-tuscany-400`),U(V,a(i)==="outside-the-suitcase"?"Take shelter from the rain":"Brave the storm")}),at(h),P(s,y),O()}z(["click"]);export{Ot as component,Rt as universal};
//# sourceMappingURL=3.Co70vHNc.js.map
