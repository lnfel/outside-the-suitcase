{"version":3,"file":"6.CzfCGuwT.js","sources":["../../../../../../src/routes/(main)/stream/+layout.ts","../../../../../../src/routes/(main)/stream/+layout.svelte"],"sourcesContent":["import { PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY, PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID } from \"$env/static/public\"\nimport { parseSheetData, filterHeaders } from \"$lib/google/sheets\"\n\nexport const load = async ({ fetch }) => {\n    // const sheetData = Promise.all([\n    //     await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values/F2P!B8:8?majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`),\n    //     await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=F2P!C10:V&ranges=F2P!Y10:AR&ranges=F2P!AU10:BN&ranges=F2P!BQ10:CJ&ranges=F2P!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`),\n    //     await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=FFA!C10:V&ranges=FFA!Y10:AR&ranges=FFA!AU10:BN&ranges=FFA!BQ10:CJ&ranges=FFA!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n    // ])\n\n    const sheet = new Promise(async (resolve, reject) => {\n        const sheetResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values/F2P!B8:8?majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n        const headers = filterHeaders((await sheetResponse.json())?.values[0] ?? [])\n\n        const f2pResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=F2P!C10:V&ranges=F2P!Y10:AR&ranges=F2P!AU10:BN&ranges=F2P!BQ10:CJ&ranges=F2P!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n        const f2p = parseSheetData(headers, (await f2pResponse.json()).valueRanges)\n\n        const ffaResponse = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=FFA!C10:V&ranges=FFA!Y10:AR&ranges=FFA!AU10:BN&ranges=FFA!BQ10:CJ&ranges=FFA!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n        const ffa = parseSheetData(headers, (await ffaResponse.json()).valueRanges)\n\n        const raidGroup = Object.keys(f2p) as Sheet.RaidTitle[]\n        resolve({ headers, f2p, ffa, raidGroup })\n    })\n    // const sheetF2P = new Promise(async (resolve, reject) => {\n    //     const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=F2P!C10:V&ranges=F2P!Y10:AR&ranges=F2P!AU10:BN&ranges=F2P!BQ10:CJ&ranges=F2P!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n    //     const f2pData = parseSheetData(headers, (await response.json()).valueRanges)\n    //     resolve(f2pData)\n    // })\n    // const sheetFFA = new Promise(async (resolve, reject) => {\n    //     const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID}/values:batchGet?ranges=FFA!C10:V&ranges=FFA!Y10:AR&ranges=FFA!AU10:BN&ranges=FFA!BQ10:CJ&ranges=FFA!CM10:DF&majorDimension=ROWS&key=${PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY}`)\n    //     const ffaData = parseSheetData(headers, (await response.json()).valueRanges)\n    //     resolve(ffaData)\n    // })\n\n    return {\n        sheet\n    }\n}\n","<script lang=\"ts\">\n    let { data, children } = $props()\n</script>\n\n{#await data.sheet}\n    <div>loading</div>\n{:then response}\n    <pre>\n        <code>\n            {JSON.stringify(response, null, 4)}\n        </code>\n    </pre>\n    <div>sheet loaded</div>\n{/await}\n\n<!-- {#await data.sheetF2P}\n    <div>loading</div>\n{:then response}\n    <div>sheetF2P loaded</div>\n{/await}\n\n{#await data.sheetFFA}\n    <div>loading</div>\n{:then response}\n    <div>FFA loaded</div>\n{/await} -->\n\n{@render children()}\n"],"names":["load","fetch","resolve","reject","sheetResponse","PUBLIC_GLOBAL_RANKING_SPREADSHEET_ID","PUBLIC_LAMY_API_GOOGLE_SHEETS_API_KEY","headers","filterHeaders","_a","f2pResponse","f2p","parseSheetData","ffaResponse","ffa","raidGroup","response","$.get"],"mappings":"6ZAGO,MAAMA,EAAO,MAAO,CAAE,MAAAC,MA+BlB,CACH,MAzBU,IAAI,QAAQ,MAAOC,EAASC,IAAW,OACjD,MAAMC,EAAgB,MAAMH,EAAM,iDAAiDI,CAAoC,4CAA4CC,CAAqC,EAAE,EACpMC,EAAUC,IAAeC,EAAA,MAAML,EAAc,SAApB,YAAAK,EAA6B,OAAO,KAAM,CAAA,CAAE,EAErEC,EAAc,MAAMT,EAAM,iDAAiDI,CAAoC,wIAAwIC,CAAqC,EAAE,EAC9RK,EAAMC,EAAeL,GAAU,MAAMG,EAAY,KAAA,GAAQ,WAAW,EAEpEG,EAAc,MAAMZ,EAAM,iDAAiDI,CAAoC,wIAAwIC,CAAqC,EAAE,EAC9RQ,EAAMF,EAAeL,GAAU,MAAMM,EAAY,KAAA,GAAQ,WAAW,EAEpEE,EAAY,OAAO,KAAKJ,CAAG,EACjCT,EAAQ,CAAE,QAAAK,EAAS,IAAAI,EAAK,IAAAG,EAAK,UAAAC,CAAW,CAAA,CAAA,CAC3C,CAaG;;0IC/BK,+BAENC,IAAQ;cAGF,KAAK,UAASC,EAACD,CAAQ,EAAE,KAAM,CAAC,GAAA,EAAA;AAAA"}