import{h as Be,c as Ie,a as qe}from"../chunks/index.CNvdgNnY.js";import"../chunks/disclose-version.Bg9kRutz.js";import{p as Ge,b as Q,t as h,a as Fe,s as D,g as f,n as o,l as ie,a5 as de}from"../chunks/runtime.DTLJS4Cp.js";import{d as We,s as w}from"../chunks/render.CJy_g0Wp.js";import{p as O}from"../chunks/proxy.CKJoFeXp.js";import{a as He,L as Je}from"../chunks/LoadingSpinner.CxygTBZJ.js";import{i as U}from"../chunks/if.BBPrruah.js";import{e as B,i as I}from"../chunks/each.DHoT2t3W.js";import{a as i,t as b,$ as Ke,s as a,c as e,b as x,f as y}from"../chunks/template.B2J4WHVd.js";import{h as Qe}from"../chunks/svelte-head.CUqH2DhT.js";import{s as R,h as Ve}from"../chunks/attributes.ClFAMcYJ.js";import{s as V,t as Xe}from"../chunks/class.CT2fZM7p.js";import{b as Ye}from"../chunks/select.C0oBQ22F.js";import{u as Ze,s as $e,p as et}from"../chunks/stores.SEWX6IUZ.js";import{b as tt}from"../chunks/paths.65KxAWAF.js";import{o as at,g as rt}from"../chunks/entry.Dk0inaQV.js";import{o as st}from"../chunks/index-client.XNwHMS1C.js";const ot=async({parent:S,params:r,url:g})=>({headers:Be,characterMap:Ie,afflatusMap:qe,categories:["f2p","ffa"],category:g.searchParams.get("category")??"f2p"}),At=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));function nt(S,r){const g=new URLSearchParams(window.location.search);g.set("category",S.currentTarget.value);const j=new URL(window.location.toString());j.search=g.toString(),r(j.toString())}function lt(S){S.stopPropagation();const r=S.currentTarget.closest(".character");r&&(r.dataset.current=r.dataset.state==="open"?"inactive":"active",document.querySelectorAll('.character[data-state="open"]:not([data-current="inactive"])').forEach(j=>{j.dataset.state="close"}),r.dataset.state=r.dataset.state==="open"?"close":"open")}var ct=b('<option class="svelte-11fwp8c"> </option>'),it=(S,r,g)=>r(g().toLowerCase()),dt=b('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up w-4 h-4 svelte-11fwp8c"><path d="m18 15-6-6-6 6" class="svelte-11fwp8c"></path></svg>'),vt=b('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down w-4 h-4 svelte-11fwp8c"><path d="m6 9 6 6 6-6" class="svelte-11fwp8c"></path></svg>'),pt=b('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down w-4 h-4 svelte-11fwp8c"><path d="m7 15 5 5 5-5" class="svelte-11fwp8c"></path><path d="m7 9 5-5 5 5" class="svelte-11fwp8c"></path></svg>'),ft=b('<th scope="col"><button type="button" class="flex items-center gap-1 outline-none hover:bg-tuscany-500 focus:bg-tuscany-500 px-4 py-2 svelte-11fwp8c"><span class="svelte-11fwp8c"> </span> <!></button></th>'),ut=b('<th scope="col"> </th>'),mt=b('<div data-state="close" data-current="inactive" class="character group dropdown relative svelte-11fwp8c"><button aria-label="Toggle team info" type="button" class="outline-none svelte-11fwp8c"><img loading="lazy" width="40" height="40" class="inline w-10 h-10 svelte-11fwp8c"></button> <div class="dropdown-content group-data-[state=close]:hidden absolute left-1/2 -translate-x-1/2 z-[9] text-slate-800 bg-tuscany-300 px-2.5 py-2 space-y-2 shadow svelte-11fwp8c"><div class="flex items-center svelte-11fwp8c"><img width="15" height="25" class="relative mt-[-20px] ml-[-5px] svelte-11fwp8c"> <div class="crimson-text-bold tracking-wide whitespace-nowrap pl-1 svelte-11fwp8c"> </div></div> <ul class="text-sm svelte-11fwp8c"><li class="flex items-center justify-between flex-nowrap whitespace-nowrap gap-6 svelte-11fwp8c"><div class="svelte-11fwp8c">Resonance level</div> <div class="svelte-11fwp8c"> </div></li> <li class="flex items-center justify-between flex-nowrap whitespace-nowrap gap-6 svelte-11fwp8c"><div class="svelte-11fwp8c">Portray</div> <div class="svelte-11fwp8c"> </div></li> <li class="flex items-center justify-between flex-nowrap whitespace-nowrap gap-6 svelte-11fwp8c"><div class="svelte-11fwp8c">Amplification</div> <div class="svelte-11fwp8c"> </div></li></ul></div></div>'),wt=b('<tr class="raid-entry odd:bg-tuscany-200 even:bg-tuscany-100 svelte-11fwp8c"><td class="raid-entry-rank px-4 py-2 dark:text-slate-800 svelte-11fwp8c"></td><td class="raid-entry-username px-4 py-2 dark:text-slate-800 svelte-11fwp8c"> </td><td class="raid-entry-score px-4 py-2 dark:text-slate-800 svelte-11fwp8c"> </td><td class="raid-entry-characters dark:text-slate-800 svelte-11fwp8c"><div class="flex items-center min-w-48 px-4 py-2 svelte-11fwp8c"></div></td><td class="px-4 py-2 dark:text-slate-800 svelte-11fwp8c"> </td><td class="px-4 py-2 dark:text-slate-800 whitespace-nowrap svelte-11fwp8c"> </td></tr>'),gt=b('<tr class="svelte-11fwp8c"><td colspan="6" class="skeleton crimson-text-regular tracking-wider border border-tuscany-600 svelte-11fwp8c"><div class="flex items-center justify-center gap-2 py-6 svelte-11fwp8c"><!> <span class="svelte-11fwp8c">Loading ranking data</span></div></td></tr>'),_t=b('<main class="flex-grow space-y-6 svelte-11fwp8c"><div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 svelte-11fwp8c"><h3 class="crimson-text-bold text-tuscany-600 dark:text-tuscany-300 text-2xl px-10 md:px-0 svelte-11fwp8c"> </h3> <div class="flex items-center gap-2 px-10 md:px-0 svelte-11fwp8c"><label for="category" class="sr-only md:not-sr-only svelte-11fwp8c">Category</label> <select name="category" id="category" class="appearance-none cursor-pointer text-white text-sm bg-tuscany-600 outline-none hover:bg-tuscany-500 focus:bg-tuscany-500 pl-4 pr-8 py-1 bg-[right_0.5rem_center] bg-no-repeat bg-[length:1.5em_1.5em] svelte-11fwp8c"></select></div></div> <div class="table-container overflow-x-auto svelte-11fwp8c"><table class="w-full text-left border-collapse border border-tuscany-600 svelte-11fwp8c"><thead class="svelte-11fwp8c"><tr class="svelte-11fwp8c"></tr></thead><tbody><!></tbody></table></div></main>');function Bt(S,r){Ge(r,!0);const g={};Ze(g);const j=()=>$e(et,"$page",g);let M=Q(O(r.data.category)),C=Q(void 0),X=Q("pending"),L=O({column:"score",order:"descending"});function ve(s,t){return{username:(d,c)=>d==="ascending"?c.sort((n,l)=>new Intl.Collator("en").compare(n.Username,l.Username)):c.sort((n,l)=>new Intl.Collator("en").compare(l.Username,n.Username)),score:(d,c)=>d==="ascending"?c.sort((n,l)=>n.Score-l.Score):c.sort((n,l)=>l.Score-n.Score),"entry date":(d,c)=>d==="ascending"?c.sort((n,l)=>n["Entry Date"].valueOf()-l["Entry Date"].valueOf()):c.sort((n,l)=>l["Entry Date"].valueOf()-n["Entry Date"].valueOf())}[s.column](s.order,t)}async function pe(s){L.column===s&&(L.order=L.order==="ascending"?"descending":"ascending"),L.column=s}at(async()=>{D(M,O(new URL(window.location.toString()).searchParams.get("category")??"f2p")),D(C,O((await r.data.sheet).raidGroup.find(s=>{var t;return s.toLowerCase().split(" ").join("-")===window.location.pathname.replace(`${tt}/leaderboard/`,"").replace(`${(t=j().route.id)==null?void 0:t.replace("/(main)/leaderboard/","").replace("/[raid=raid]","")}/`,"")})))}),st(async()=>{D(C,O((await r.data.sheet).raidGroup.find(s=>s.toLowerCase().split(" ").join("-")===j().params.raid))),r.data.sheet.then(s=>{var t,p;f(C)&&setTimeout(()=>{D(X,"resolved")},Number(((p=(t=s[f(M)][f(C)])==null?void 0:t.values)==null?void 0:p.length)??0)*410)})});var Y=_t();Qe(s=>{h(()=>Ke.title=`${f(C)??""} | Outside the suitcase`)});var Z=e(Y),$=e(Z),fe=e($),ue=a(a($,!0)),me=e(ue),q=a(a(me,!0));q.__change=[nt,rt],B(q,73,()=>r.data.categories??[],I,(s,t,p)=>{var d=ct(),c,n=e(d);h(()=>w(n,o(t).toUpperCase())),h(()=>{c!==(c=o(t))&&(d.value=(d.__value=o(t))==null?"":o(t))}),i(s,d)});var we=a(a(Z,!0)),ge=e(we),ee=e(ge),_e=e(ee),G=(s,t)=>{let p=()=>t==null?void 0:t().name,d=ie(()=>de(t==null?void 0:t().sortable,()=>!1)),c=ie(()=>de(t==null?void 0:t().className,()=>""));var n=x(),l=y(n);U(l,()=>f(d),m=>{var v=ft(),u=e(v);u.__click=[it,pe,p];var _=e(u),F=e(_),z=a(a(_,!0));U(z,()=>L.column===p().toLowerCase(),P=>{var N=x(),W=y(N);U(W,()=>L.order==="ascending",E=>{var T=dt();i(E,T)},E=>{var T=vt();i(E,T)}),i(P,N)},P=>{var N=pt();i(P,N)}),h(()=>{V(v,`text-lg whitespace-nowrap text-white bg-tuscany-600 ${f(c)??""} svelte-11fwp8c`),Xe(u,"bg-tuscany-500",L.column===p().toLowerCase()),w(F,p())}),i(m,v)},m=>{var v=ut(),u=e(v);h(()=>{V(v,`px-4 py-2 text-lg whitespace-nowrap text-white bg-tuscany-600 ${f(c)??""} svelte-11fwp8c`),w(u,p())}),i(m,v)}),i(s,n)};B(_e,73,()=>r.data.headers,I,(s,t,p)=>{var d=x(),c=y(d);U(c,()=>["Username","Score","Entry Date"].includes(o(t)),n=>{var l=x(),m=y(l);G(m,()=>({name:o(t),sortable:!0})),i(n,l)},n=>{var l=x(),m=y(l);U(m,()=>o(t)==="Team",v=>{var u=x(),_=y(u);G(_,()=>({name:o(t),className:"min-w-48"})),i(v,u)},v=>{var u=x(),_=y(u);G(_,()=>({name:o(t)})),i(v,u)},!0),i(n,l)}),i(s,d)});var te=a(ee),he=e(te);He(he,()=>r.data.sheet,s=>{var t=gt(),p=e(t),d=e(p),c=e(d);Je(c,{}),i(s,t)},(s,t)=>{var p=x(),d=y(p);U(d,()=>f(C),c=>{var n=x(),l=y(n);B(l,65,()=>{var m;return ve(L,((m=f(t)[f(M)][f(C)])==null?void 0:m.values)??[])},I,(m,v,u)=>{var _=wt();R(_,"style",`--animation-order: ${o(u)+1};`);var F=e(_),z=a(F),P=e(z),N=a(z),W=e(N);h(()=>w(W,o(v).Score.toLocaleString()));var E=a(N),T=e(E);B(T,73,()=>o(v).characters,I,(ke,k,xt)=>{var re=x(),Se=y(re);U(Se,()=>{var A;return(A=r.data.characterMap)==null?void 0:A[o(k).Name]},A=>{var se=mt(),H=e(se);H.__click=[lt];var J=e(H),Ce=a(a(H,!0)),oe=e(Ce),K=e(oe),Le=a(a(K,!0)),je=e(Le),Ne=a(a(oe,!0)),ne=e(Ne),Ue=e(ne),Ee=a(a(Ue,!0)),Me=e(Ee),le=a(a(ne,!0)),Pe=e(le),Te=a(a(Pe,!0)),De=e(Te),Oe=a(a(le,!0)),Re=e(Oe),ze=a(a(Re,!0)),Ae=e(ze);h(()=>{var ce;R(J,"src",((ce=r.data.characterMap[o(k).Name])==null?void 0:ce.thumbnail)??""),R(J,"alt",o(k).Name),R(K,"src",r.data.afflatusMap[r.data.characterMap[o(k).Name].afflatus].tag),R(K,"alt",r.data.characterMap[o(k).Name].afflatus),w(je,o(k).Name),w(Me,o(k).Resonance),w(De,o(k).Portray),w(Ae,o(k).Amplification)}),Ve(J),i(A,se)}),i(ke,re)});var ae=a(E),xe=e(ae),ye=a(ae),be=e(ye);h(()=>w(be,o(v)["Entry Date"].toLocaleDateString("en-CA"))),h(()=>{w(P,o(v).Username),w(xe,o(v)["Entry Tag"])}),i(m,_)}),i(c,n)}),i(s,p)}),h(()=>{w(fe,f(C)??"Raid Title"),V(te,`${(f(X)==="pending"?"loading":"loaded")??""} svelte-11fwp8c`)}),Ye(q,()=>f(M),s=>D(M,s)),i(S,Y),Fe()}We(["change","click"]);export{Bt as component,At as universal};
//# sourceMappingURL=11.o521MZqK.js.map
