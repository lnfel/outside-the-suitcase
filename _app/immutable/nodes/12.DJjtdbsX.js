import{h as ze,c as Ae}from"../chunks/index.CT8Tde97.js";import"../chunks/disclose-version.Bg9kRutz.js";import{p as Be,e as J,t as w,a as Ge,s as O,g,G as o,D as ie,aa as ce}from"../chunks/runtime.C2Zc6Vci.js";import{d as Ie,s as _}from"../chunks/render.BSFr2KKI.js";import{p as R}from"../chunks/proxy.BjlMx0ws.js";import{a as qe}from"../chunks/await.BS06Sh4X.js";import{i as D}from"../chunks/if.MdFLc77f.js";import{e as A,i as B}from"../chunks/each.CZx_R7Uq.js";import{a as c,t as b,$ as Fe,s as a,c as t,b as x,f as y}from"../chunks/template.DJK7smhD.js";import{h as We}from"../chunks/svelte-head.D4WIdBQT.js";import{s as K,h as He}from"../chunks/attributes.Cv1ilxUd.js";import{s as Q,t as Je}from"../chunks/class.C6jkPbH_.js";import{b as Ke}from"../chunks/select.CM0YoJAf.js";import{u as Qe,s as Ve,p as Xe}from"../chunks/stores.Ckbj9_XZ.js";import{b as Ye}from"../chunks/paths.B_7Dn9K0.js";import{o as Ze,g as $e}from"../chunks/entry.BDTU8x7V.js";import{o as et}from"../chunks/index-client.VlGoYQNb.js";import{L as tt}from"../chunks/LoadingSpinner.Dn8c2RTK.js";const at=async({parent:k,params:n,url:h})=>({headers:ze,characterMap:Ae,categories:["f2p","ffa"],category:h.searchParams.get("category")??"f2p"}),Mt=Object.freeze(Object.defineProperty({__proto__:null,load:at},Symbol.toStringTag,{value:"Module"}));function st(k,n){const h=new URLSearchParams(window.location.search);h.set("category",k.currentTarget.value);const S=new URL(window.location.toString());S.search=h.toString(),console.log(S.toString()),n(S.toString())}function rt(k){k.stopPropagation();const n=k.currentTarget.closest(".character");n&&(n.dataset.current=n.dataset.state==="open"?"inactive":"active",document.querySelectorAll('.character[data-state="open"]:not([data-current="inactive"])').forEach(S=>{S.dataset.state="close"}),n.dataset.state=n.dataset.state==="open"?"close":"open")}var ot=b('<option class="svelte-192psg6"> </option>'),nt=(k,n,h)=>n(h().toLowerCase()),lt=b('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up w-4 h-4 svelte-192psg6"><path d="m18 15-6-6-6 6" class="svelte-192psg6"></path></svg>'),it=b('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down w-4 h-4 svelte-192psg6"><path d="m6 9 6 6 6-6" class="svelte-192psg6"></path></svg>'),ct=b('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down w-4 h-4 svelte-192psg6"><path d="m7 15 5 5 5-5" class="svelte-192psg6"></path><path d="m7 9 5-5 5 5" class="svelte-192psg6"></path></svg>'),dt=b('<th scope="col"><button type="button" class="flex items-center gap-1 outline-none hover:bg-tuscany-500 focus:bg-tuscany-500 px-4 py-2 svelte-192psg6"><span class="svelte-192psg6"> </span> <!></button></th>'),vt=b('<th scope="col"> </th>'),pt=b('<div data-state="close" data-current="inactive" class="character group dropdown relative svelte-192psg6"><button aria-label="Toggle team info" type="button" class="outline-none svelte-192psg6"><img loading="lazy" width="40" height="40" class="inline w-10 h-10 svelte-192psg6"></button> <div class="dropdown-content group-data-[state=close]:hidden absolute left-1/2 -translate-x-1/2 z-10 text-white bg-tuscany-600 p-2 space-y-2 svelte-192psg6"><div class="crimson-text-bold tracking-wide svelte-192psg6"> </div> <ul class="text-sm svelte-192psg6"><li class="flex items-center justify-between flex-nowrap whitespace-nowrap space-x-4 svelte-192psg6"><div class="svelte-192psg6">Resonance level</div> <div class="svelte-192psg6"> </div></li> <li class="flex items-center justify-between flex-nowrap whitespace-nowrap space-x-4 svelte-192psg6"><div class="svelte-192psg6">Portray</div> <div class="svelte-192psg6"> </div></li> <li class="flex items-center justify-between flex-nowrap whitespace-nowrap space-x-4 svelte-192psg6"><div class="svelte-192psg6">Amplification</div> <div class="svelte-192psg6"> </div></li></ul></div></div>'),gt=b('<tr class="raid-entry odd:bg-tuscany-200 even:bg-tuscany-100 svelte-192psg6"><td class="raid-entry-rank px-4 py-2 dark:text-slate-800 svelte-192psg6"></td><td class="raid-entry-username px-4 py-2 dark:text-slate-800 svelte-192psg6"> </td><td class="raid-entry-score px-4 py-2 dark:text-slate-800 svelte-192psg6"> </td><td class="raid-entry-characters dark:text-slate-800 svelte-192psg6"><div class="flex items-center min-w-48 px-4 py-2 svelte-192psg6"></div></td><td class="px-4 py-2 dark:text-slate-800 svelte-192psg6"> </td><td class="px-4 py-2 dark:text-slate-800 whitespace-nowrap svelte-192psg6"> </td></tr>'),ut=b('<tr class="svelte-192psg6"><td colspan="6" class="skeleton crimson-text-regular tracking-wider border border-tuscany-600 svelte-192psg6"><div class="flex items-center justify-center gap-2 py-6 svelte-192psg6"><!> <span class="svelte-192psg6">Loading ranking data</span></div></td></tr>'),mt=b('<main class="flex-grow space-y-6 svelte-192psg6"><div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 svelte-192psg6"><h3 class="crimson-text-bold text-tuscany-600 dark:text-tuscany-300 text-2xl px-10 md:px-0 svelte-192psg6"> </h3> <div class="flex items-center gap-2 px-10 md:px-0 svelte-192psg6"><label for="category" class="sr-only md:not-sr-only svelte-192psg6">Category</label> <select name="category" id="category" class="appearance-none cursor-pointer text-white text-sm bg-tuscany-600 outline-none hover:bg-tuscany-500 focus:bg-tuscany-500 pl-4 pr-8 py-1 bg-[right_0.5rem_center] bg-no-repeat bg-[length:1.5em_1.5em] svelte-192psg6"></select></div></div> <div class="table-container overflow-x-auto svelte-192psg6"><table class="w-full text-left border-collapse border border-tuscany-600 svelte-192psg6"><thead class="svelte-192psg6"><tr class="svelte-192psg6"></tr></thead><tbody><!></tbody></table></div></main>');function zt(k,n){Be(n,!0);const h={};Qe(h);const S=()=>Ve(Xe,"$page",h);let N=J(R(n.data.category)),C=J(void 0),V=J("pending"),L=R({column:"score",order:"descending"});function de(s,e){return{username:(d,i)=>d==="ascending"?i.sort((r,l)=>new Intl.Collator("en").compare(r.Username,l.Username)):i.sort((r,l)=>new Intl.Collator("en").compare(l.Username,r.Username)),score:(d,i)=>d==="ascending"?i.sort((r,l)=>r.Score-l.Score):i.sort((r,l)=>l.Score-r.Score),"entry date":(d,i)=>d==="ascending"?i.sort((r,l)=>r["Entry Date"].valueOf()-l["Entry Date"].valueOf()):i.sort((r,l)=>l["Entry Date"].valueOf()-r["Entry Date"].valueOf())}[s.column](s.order,e)}async function ve(s){L.column===s&&(L.order=L.order==="ascending"?"descending":"ascending"),L.column=s}Ze(async()=>{O(N,R(new URL(window.location.toString()).searchParams.get("category")??"f2p")),O(C,R((await n.data.sheet).raidGroup.find(s=>{var e;return s.toLowerCase().split(" ").join("-")===window.location.pathname.replace(`${Ye}/leaderboard/`,"").replace(`${(e=S().route.id)==null?void 0:e.replace("/(main)/leaderboard/","").replace("/[raid=raid]","")}/`,"")})))}),et(async()=>{O(C,R((await n.data.sheet).raidGroup.find(s=>s.toLowerCase().split(" ").join("-")===S().params.raid))),n.data.sheet.then(s=>{var e,p;g(C)&&setTimeout(()=>{O(V,"resolved")},Number(((p=(e=s[g(N)][g(C)])==null?void 0:e.values)==null?void 0:p.length)??0)*410)})});var X=mt();We(s=>{w(()=>Fe.title=`${g(C)??""} | Outside the suitcase`)});var Y=t(X),Z=t(Y),pe=t(Z),ge=a(a(Z,!0)),ue=t(ge),G=a(a(ue,!0));G.__change=[st,$e],A(G,73,()=>n.data.categories??[],B,(s,e,p)=>{var d=ot(),i,r=t(d);w(()=>_(r,o(e).toUpperCase())),w(()=>{i!==(i=o(e))&&(d.value=(d.__value=o(e))==null?"":o(e))}),c(s,d)});var me=a(a(Y,!0)),_e=t(me),$=t(_e),he=t($),I=(s,e)=>{let p=()=>e==null?void 0:e().name,d=ie(()=>ce(e==null?void 0:e().sortable,()=>!1)),i=ie(()=>ce(e==null?void 0:e().className,()=>""));var r=x(),l=y(r);D(l,()=>g(d),m=>{var v=dt(),u=t(v);u.__click=[nt,ve,p];var f=t(u),q=t(f),M=a(a(f,!0));D(M,()=>L.column===p().toLowerCase(),P=>{var j=x(),F=y(j);D(F,()=>L.order==="ascending",E=>{var T=lt();c(E,T)},E=>{var T=it();c(E,T)}),c(P,j)},P=>{var j=ct();c(P,j)}),w(()=>{Q(v,`text-lg whitespace-nowrap text-white bg-tuscany-600 ${g(i)??""} svelte-192psg6`),Je(u,"bg-tuscany-500",L.column===p().toLowerCase()),_(q,p())}),c(m,v)},m=>{var v=vt(),u=t(v);w(()=>{Q(v,`px-4 py-2 text-lg whitespace-nowrap text-white bg-tuscany-600 ${g(i)??""} svelte-192psg6`),_(u,p())}),c(m,v)}),c(s,r)};A(he,73,()=>n.data.headers,B,(s,e,p)=>{var d=x(),i=y(d);D(i,()=>["Username","Score","Entry Date"].includes(o(e)),r=>{var l=x(),m=y(l);I(m,()=>({name:o(e),sortable:!0})),c(r,l)},r=>{var l=x(),m=y(l);D(m,()=>o(e)==="Team",v=>{var u=x(),f=y(u);I(f,()=>({name:o(e),className:"min-w-48"})),c(v,u)},v=>{var u=x(),f=y(u);I(f,()=>({name:o(e)})),c(v,u)},!0),c(r,l)}),c(s,d)});var ee=a($),fe=t(ee);qe(fe,()=>n.data.sheet,s=>{var e=ut(),p=t(e),d=t(p),i=t(d);tt(i,{}),c(s,e)},(s,e)=>{var p=x(),d=y(p);D(d,()=>g(C),i=>{var r=x(),l=y(r);A(l,65,()=>{var m;return de(L,((m=g(e)[g(N)][g(C)])==null?void 0:m.values)??[])},B,(m,v,u)=>{var f=gt();K(f,"style",`--animation-order: ${o(u)+1};`);var q=t(f),M=a(q),P=t(M),j=a(M),F=t(j);w(()=>_(F,o(v).Score.toLocaleString()));var E=a(j),T=t(E);A(T,73,()=>o(v).characters,B,(be,U,ht)=>{var ae=x(),ke=y(ae);D(ke,()=>{var z;return(z=n.data.characterMap)==null?void 0:z[o(U).Name]},z=>{var se=pt(),W=t(se);W.__click=[rt];var H=t(W),Se=a(a(W,!0)),re=t(Se),Ce=t(re),Le=a(a(re,!0)),oe=t(Le),je=t(oe),Ue=a(a(je,!0)),De=t(Ue),ne=a(a(oe,!0)),Ee=t(ne),Ne=a(a(Ee,!0)),Pe=t(Ne),Te=a(a(ne,!0)),Oe=t(Te),Re=a(a(Oe,!0)),Me=t(Re);w(()=>{var le;K(H,"src",((le=n.data.characterMap[o(U).Name])==null?void 0:le.thumbnail)??""),K(H,"alt",o(U).Name),_(Ce,o(U).Name),_(De,o(U).Resonance),_(Pe,o(U).Portray),_(Me,o(U).Amplification)}),He(H),c(z,se)}),c(be,ae)});var te=a(E),we=t(te),xe=a(te),ye=t(xe);w(()=>_(ye,o(v)["Entry Date"].toLocaleDateString("en-CA"))),w(()=>{_(P,o(v).Username),_(we,o(v)["Entry Tag"])}),c(m,f)}),c(i,r)}),c(s,p)}),w(()=>{_(pe,g(C)??"Raid Title"),Q(ee,`${(g(V)==="pending"?"loading":"loaded")??""} svelte-192psg6`)}),Ke(G,()=>g(N),s=>O(N,s)),c(k,X),Ge()}Ie(["change","click"]);export{zt as component,Mt as universal};
//# sourceMappingURL=12.DJjtdbsX.js.map
