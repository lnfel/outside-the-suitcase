import{h as Ne,c as Re}from"../chunks/index.BgedIR36.js";import"../chunks/disclose-version.Bg9kRutz.js";import{p as Me,e as W,t as h,a as ze,s as N,g as d,G as l,D as Ae,aa as Be}from"../chunks/runtime.C2Zc6Vci.js";import{d as Ee,s as v}from"../chunks/render.BSFr2KKI.js";import{p as R}from"../chunks/proxy.BjlMx0ws.js";import{a as Ge}from"../chunks/await.BS06Sh4X.js";import{i as D}from"../chunks/if.MdFLc77f.js";import{e as B,i as E}from"../chunks/each.CZx_R7Uq.js";import{a as i,t as f,$ as Ie,s,c as t,b as k,f as S}from"../chunks/template.DJK7smhD.js";import{h as qe}from"../chunks/svelte-head.D4WIdBQT.js";import{s as H,h as Fe}from"../chunks/attributes.Cv1ilxUd.js";import{s as We,t as He}from"../chunks/class.C6jkPbH_.js";import{b as Je}from"../chunks/select.CM0YoJAf.js";import{u as Ke,s as Qe,p as Ve}from"../chunks/stores.DN4G8WcW.js";import{b as Xe}from"../chunks/paths.CIHyTKLe.js";import{o as Ye,g as Ze}from"../chunks/entry.CpbL_mee.js";import{o as $e}from"../chunks/index-client.VlGoYQNb.js";import{L as et}from"../chunks/LoadingSpinner.Dn8c2RTK.js";const tt=async({parent:w,params:n,url:m})=>({headers:Ne,characterMap:Re,categories:["f2p","ffa"],category:m.searchParams.get("category")??"f2p"}),Mt=Object.freeze(Object.defineProperty({__proto__:null,load:tt},Symbol.toStringTag,{value:"Module"}));function at(w,n){const m=new URLSearchParams(window.location.search);m.set("category",w.currentTarget.value);const x=new URL(window.location.toString());x.search=m.toString(),console.log(x.toString()),n(x.toString())}function st(w){w.stopPropagation();const n=w.currentTarget.closest(".character");n&&(n.dataset.current=n.dataset.state==="open"?"inactive":"active",document.querySelectorAll('.character[data-state="open"]:not([data-current="inactive"])').forEach(x=>{x.dataset.state="close"}),n.dataset.state=n.dataset.state==="open"?"close":"open")}var rt=f('<option class="svelte-192psg6"> </option>'),ot=(w,n,m)=>n(m().toLowerCase()),nt=f('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up w-4 h-4 svelte-192psg6"><path d="m18 15-6-6-6 6" class="svelte-192psg6"></path></svg>'),lt=f('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down w-4 h-4 svelte-192psg6"><path d="m6 9 6 6 6-6" class="svelte-192psg6"></path></svg>'),it=f('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down w-4 h-4 svelte-192psg6"><path d="m7 15 5 5 5-5" class="svelte-192psg6"></path><path d="m7 9 5-5 5 5" class="svelte-192psg6"></path></svg>'),ct=f('<th scope="col" class="text-lg whitespace-nowrap text-white bg-tuscany-600 svelte-192psg6"><button type="button" class="flex items-center gap-1 outline-none hover:bg-tuscany-500 focus:bg-tuscany-500 px-4 py-2 svelte-192psg6"><span class="svelte-192psg6"> </span> <!></button></th>'),dt=f('<th scope="col" class="px-4 py-2 text-lg whitespace-nowrap text-white bg-tuscany-600 svelte-192psg6"> </th>'),vt=f('<div data-state="close" data-current="inactive" class="character group dropdown relative svelte-192psg6"><button aria-label="Toggle team info" type="button" class="outline-none svelte-192psg6"><img loading="lazy" width="40" height="40" class="inline w-10 h-10 svelte-192psg6"></button> <div class="dropdown-content group-data-[state=close]:hidden absolute left-1/2 -translate-x-1/2 z-10 text-white bg-tuscany-600 p-2 space-y-2 svelte-192psg6"><div class="crimson-text-bold tracking-wide svelte-192psg6"> </div> <ul class="text-sm svelte-192psg6"><li class="flex items-center justify-between flex-nowrap whitespace-nowrap space-x-4 svelte-192psg6"><div class="svelte-192psg6">Resonance level</div> <div class="svelte-192psg6"> </div></li> <li class="flex items-center justify-between flex-nowrap whitespace-nowrap space-x-4 svelte-192psg6"><div class="svelte-192psg6">Portray</div> <div class="svelte-192psg6"> </div></li> <li class="flex items-center justify-between flex-nowrap whitespace-nowrap space-x-4 svelte-192psg6"><div class="svelte-192psg6">Amplification</div> <div class="svelte-192psg6"> </div></li></ul></div></div>'),pt=f('<tr class="raid-entry odd:bg-tuscany-200 even:bg-tuscany-100 svelte-192psg6"><td class="raid-entry-rank px-4 py-2 dark:text-slate-800 svelte-192psg6"></td><td class="raid-entry-username px-4 py-2 dark:text-slate-800 svelte-192psg6"> </td><td class="raid-entry-score px-4 py-2 dark:text-slate-800 svelte-192psg6"> </td><td class="raid-entry-characters dark:text-slate-800 svelte-192psg6"><div class="flex items-center min-w-48 px-4 py-2 svelte-192psg6"></div></td><td class="px-4 py-2 dark:text-slate-800 svelte-192psg6"> </td><td class="px-4 py-2 dark:text-slate-800 whitespace-nowrap svelte-192psg6"> </td></tr>'),gt=f('<tr class="svelte-192psg6"><td colspan="6" class="skeleton crimson-text-regular tracking-wider border border-tuscany-600 svelte-192psg6"><div class="flex items-center justify-center gap-2 py-6 svelte-192psg6"><!> <span class="svelte-192psg6">Loading ranking data</span></div></td></tr>'),ut=f('<main class="flex-grow space-y-6 svelte-192psg6"><h3 class="crimson-text-bold text-tuscany-600 dark:text-white text-2xl px-10 md:px-0 svelte-192psg6"> </h3> <div class="flex items-center gap-2 px-10 md:px-0 svelte-192psg6"><label for="category" class="svelte-192psg6">Category</label> <select name="category" id="category" class="appearance-none cursor-pointer text-white text-sm bg-tuscany-600 outline-none hover:bg-tuscany-500 focus:bg-tuscany-500 pl-4 pr-8 py-1 bg-[right_0.5rem_center] bg-no-repeat bg-[length:1.5em_1.5em] svelte-192psg6"></select></div> <div class="table-container overflow-x-auto svelte-192psg6"><table class="w-full text-left border-collapse border border-tuscany-600 svelte-192psg6"><thead class="svelte-192psg6"><tr class="svelte-192psg6"></tr></thead><tbody><!></tbody></table></div></main>');function zt(w,n){Me(n,!0);const m={};Ke(m);const x=()=>Qe(Ve,"$page",m);let P=W(R(n.data.category)),b=W(void 0),J=W("pending"),y=R({column:"score",order:"descending"});function ne(a,e){return a.column==="username"&&(a.order==="ascending"?e.sort((r,o)=>new Intl.Collator("en").compare(r.Username,o.Username)):e.sort((r,o)=>new Intl.Collator("en").compare(o.Username,r.Username))),a.column==="score"&&(a.order==="ascending"?e.sort((r,o)=>r.Score-o.Score):e.sort((r,o)=>o.Score-r.Score)),a.column==="entry date"&&(a.order==="ascending"?e.sort((r,o)=>r["Entry Date"].valueOf()-o["Entry Date"].valueOf()):e.sort((r,o)=>o["Entry Date"].valueOf()-r["Entry Date"].valueOf())),e}async function le(a){y.column===a&&(y.order=y.order==="ascending"?"descending":"ascending"),y.column=a}Ye(async()=>{N(P,R(new URL(window.location.toString()).searchParams.get("category")??"f2p")),N(b,R((await n.data.sheet).raidGroup.find(a=>{var e;return a.toLowerCase().split(" ").join("-")===window.location.pathname.replace(`${Xe}/leaderboard/`,"").replace(`${(e=x().route.id)==null?void 0:e.replace("/(main)/leaderboard/","").replace("/[raid=raid]","")}/`,"")})))}),$e(async()=>{N(b,R((await n.data.sheet).raidGroup.find(a=>a.toLowerCase().split(" ").join("-")===x().params.raid))),n.data.sheet.then(a=>{var e,r;d(b)&&setTimeout(()=>{N(J,"resolved")},Number(((r=(e=a[d(P)][d(b)])==null?void 0:e.values)==null?void 0:r.length)??0)*410)})});var K=ut();qe(a=>{h(()=>Ie.title=`${d(b)??""} | Outside the suitcase`)});var Q=t(K),ie=t(Q),V=s(s(Q,!0)),ce=t(V),G=s(s(ce,!0));G.__change=[at,Ze],B(G,73,()=>n.data.categories??[],E,(a,e,r)=>{var o=rt(),p,_=t(o);h(()=>v(_,l(e).toUpperCase())),h(()=>{p!==(p=l(e))&&(o.value=(o.__value=l(e))==null?"":l(e))}),i(a,o)});var de=s(s(V,!0)),ve=t(de),X=t(ve),pe=t(X),Y=(a,e)=>{let r=()=>e==null?void 0:e().name,o=Ae(()=>Be(e==null?void 0:e().sortable,()=>!1));var p=k(),_=S(p);D(_,()=>d(o),g=>{var c=ct(),u=t(c);u.__click=[ot,le,r];var M=t(u),T=t(M),I=s(s(M,!0));D(I,()=>y.column===r().toLowerCase(),L=>{var j=k(),z=S(j);D(z,()=>y.order==="ascending",O=>{var U=nt();i(O,U)},O=>{var U=lt();i(O,U)}),i(L,j)},L=>{var j=it();i(L,j)}),h(()=>{He(u,"bg-tuscany-500",y.column===r().toLowerCase()),v(T,r())}),i(g,c)},g=>{var c=dt(),u=t(c);h(()=>v(u,r())),i(g,c)}),i(a,p)};B(pe,73,()=>n.data.headers,E,(a,e,r)=>{var o=k(),p=S(o);D(p,()=>["Username","Score","Entry Date"].includes(l(e)),_=>{var g=k(),c=S(g);Y(c,()=>({name:l(e),sortable:!0})),i(_,g)},_=>{var g=k(),c=S(g);Y(c,()=>({name:l(e)})),i(_,g)}),i(a,o)});var Z=s(X),ge=t(Z);Ge(ge,()=>n.data.sheet,a=>{var e=gt(),r=t(e),o=t(r),p=t(o);et(p,{}),i(a,e)},(a,e)=>{var r=k(),o=S(r);D(o,()=>d(b),p=>{var _=k(),g=S(_);B(g,65,()=>{var c;return ne(y,((c=d(e)[d(P)][d(b)])==null?void 0:c.values)??[])},E,(c,u,M)=>{var T=pt();H(T,"style",`--animation-order: ${l(M)+1};`);var I=t(T),L=s(I),j=t(L),z=s(L),O=t(z);h(()=>v(O,l(u).Score.toLocaleString()));var U=s(z),ue=t(U);B(ue,73,()=>l(u).characters,E,(fe,C,_t)=>{var ee=k(),we=S(ee);D(we,()=>{var A;return(A=n.data.characterMap)==null?void 0:A[l(C).Name]},A=>{var te=vt(),q=t(te);q.__click=[st];var F=t(q),xe=s(s(q,!0)),ae=t(xe),be=t(ae),ye=s(s(ae,!0)),se=t(ye),ke=t(se),Se=s(s(ke,!0)),Ce=t(Se),re=s(s(se,!0)),Le=t(re),je=s(s(Le,!0)),Ue=t(je),De=s(s(re,!0)),Pe=t(De),Te=s(s(Pe,!0)),Oe=t(Te);h(()=>{var oe;H(F,"src",((oe=n.data.characterMap[l(C).Name])==null?void 0:oe.thumbnail)??""),H(F,"alt",l(C).Name),v(be,l(C).Name),v(Ce,l(C).Resonance),v(Ue,l(C).Portray),v(Oe,l(C).Amplification)}),Fe(F),i(A,te)}),i(fe,ee)});var $=s(U),me=t($),_e=s($),he=t(_e);h(()=>v(he,l(u)["Entry Date"].toLocaleDateString("en-CA"))),h(()=>{v(j,l(u).Username),v(me,l(u)["Entry Tag"])}),i(c,T)}),i(p,_)}),i(a,r)}),h(()=>{v(ie,d(b)??"Raid Title"),We(Z,`${(d(J)==="pending"?"loading":"loaded")??""} svelte-192psg6`)}),Je(G,()=>d(P),a=>N(P,a)),i(w,K),ze()}Ee(["change","click"]);export{zt as component,Mt as universal};
//# sourceMappingURL=12.Cjg-GF6A.js.map
